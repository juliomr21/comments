<div style="background-color: rgb(122, 181, 236); ">

    <div class="container">
        <div class="row">

            <div *ngFor="let i of comments" class="container col-lg-8" style="margin-bottom: 1%;">

                <div class="card">
                    <div class="row">


                        <div class="col-lg-1 col-md-1" style="margin-top: 2%;" w>
                            <button class="btn btn-primary">+</button>
                            <button class="btn btn-primary" disabled>{{i.score}}</button>
                            <button class="btn btn-primary">+</button>
                        </div>
                        <div class="col-lg-11 col-md-11">
                            <div class="flex">
                                <div>
                                    <img src={{i.user.image.png}} alt="">
                                </div>
                                <div *ngIf="i.user.username == noreply">
                                    <p style="background-color: blueviolet; border-radius: 2em;"
                                        class="text-white text-center">You</p>
                                </div>

                                <strong style="margin-left: 1%;"> {{i.user.username}} </strong>

                                <div style="margin-left: 1%;">
                                    {{i.createdAt}}
                                </div>
                                <div class="pos-end" *ngIf="i.user.username != noreply">

                                    <img src="assets/images/icon-reply.svg" alt="">
                                    <strong style="color:blueviolet;cursor: pointer;"
                                        (click)="funn(i.id,i.user.username)"> Reply</strong>

                                </div>
                                <div class="pos-end" *ngIf="i.user.username == noreply">

                                    <div class="row">
                                        <div class="col">
                                            <img src="assets/images/icon-delete.svg" alt="">
                                        </div>

                                        <div class="text-danger col" style="cursor: pointer;"
                                            (click)="delet(i.id)"> delete </div>

                                        <div class="col">
                                            <img src="assets/images/icon-edit.svg" alt="">
                                        </div>

                                        <p style="color:blueviolet;cursor: pointer; " (click)="editar(i.id,noreply)"
                                            class="col"> Edit</p>

                                    </div>

                                </div>

                            </div>

                            <p>{{i.content}}</p>

                        </div>

                    </div>
                    <div *ngIf="tem && i.id == com">
                        


                        <div class="flex" style="margin-left: 3%; margin-top: 3%">

                            <div *ngIf="ed">
                                <img src={{database.currentUser.image.png}} alt="">
                            </div>


                            <div class="mi-center text-tarea ">
                                <textarea name="" id="" cols="auto" rows="4" class="form-control" style="margin-bottom: 5%;"
                                    [(ngModel)]="reply"></textarea>
                            </div>

                            <div class="pos-end">
                                <div *ngIf="ed">
                                    <button class=" btn btn-primary" (click)="sendReply(i.id)">Reply</button>
                                </div>
                                <div *ngIf="!ed">
                                    <button class=" btn btn-primary" (click)="updateText(i.id)">Update</button>
                                </div>

                            </div>


                        </div>
                    </div>

                </div>
                <div *ngFor="let rep of i.replies" class="card bg-light" style="margin-left: 10%; margin-top: 1%;">

                    <div class="row">
                        <div class="col-lg-1 col-md-1" style="margin-top: 2%;">
                            <button class="btn btn-primary">+</button>
                            <button class="btn btn-primary">{{rep.score}}</button>
                            <button class="btn btn-primary">+</button>
                        </div>
                        <div class="col-lg-11 col-md-11" style="margin-top: 2%;">

                            <div class="flex">
                                <div>
                                    <img src={{rep.user.image.png}} alt="">
                                </div>
                                <div class="" *ngIf="rep.user.username == noreply" style="margin-left: 1%;">
                                    <p style="background-color: blueviolet;  border-radius: 1em;"
                                        class="text-white text-center">You</p>
                                </div>


                                <div style="margin-left: 1%;">
                                    <strong> {{rep.user.username}}</strong>
                                </div>
                                <div style="margin-left: 1%;">
                                    {{rep.createdAt}}
                                </div>
                                <div *ngIf="rep.user.username != noreply" class="pos-end">

                                    <img src="assets/images/icon-reply.svg" alt="">
                                    <strong style="color:blueviolet;cursor: pointer;"
                                        (click)="ff(rep.id,rep.user.username)"> Reply</strong>
                                </div>
                                <div *ngIf="rep.user.username == noreply" class="pos-end ">

                                    <div class="row">
                                        <div class="col">
                                            <img src="assets/images/icon-delete.svg" alt="">
                                        </div>

                                        <div class="text-danger col" style="cursor: pointer;"
                                            (click)="deleteR(i.id,rep.id)"> delete </div>

                                        <div class="col">
                                            <img src="assets/images/icon-edit.svg" alt="">
                                        </div>

                                        <p style="color:blueviolet;cursor: pointer; " (click)="editR(i.id,rep.id)"
                                            class="col"> Edit</p>

                                    </div>

                                </div>
                            </div>

                            <p> {{rep.content}}</p>
                        </div>

                    </div>
                    <!-- area de prueba -->
                    <!--  -->
                    <div *ngIf="edR && rep.id == com" class="flex">
                        <div class="mi-center">
                            <span></span>
                        </div>

                        <div class="mi-center text-tarea ">
                            <textarea name="" id="" cols="auto" rows="4" class="form-control" style="margin-bottom: 5%;"
                                [(ngModel)]="reply"></textarea>
                        </div>
                        <div class="pos-end">
                            <div *ngIf="rep.user.username != noreply">
                                <button class=" btn btn-primary" (click)="sendRReply(i.id)">Reply</button>
                            </div>

                            <div *ngIf="rep.user.username == noreply" class="">
                                <button class=" btn btn-primary" (click)="updateTextR(i.id,rep.id)">Update</button>
                            </div>

                        </div>

                    </div>

                    <!-- fin de area de prueba -->
                </div>

            </div>
            <!-- nnnnnnnnnnnnnkkkkk -->
            <div class="card container col-lg-8 col-md-8 " style="margin-top: 5%; margin-bottom: 5%;  ">
                <div class="flex">

                    <div class="">
                        <img src={{database.currentUser.image.png}} alt="">
                    </div>

                    <div class="mi-center text-tarea">
                        <textarea name="" id="" cols="auto" rows="4" class="form-control"
                            placeholder="Escriba un comentario..." style="margin-bottom: 5%;"
                            [(ngModel)]="text"></textarea>
                    </div>
                    <div class="pos-end">
                        <a class=" btn btn-primary" (click)="send()">SEND </a>

                    </div>
                </div>
            </div>
            <!-- mmmmmmmmmmmmmmmmmmmmmmmmm -->
        </div>
    </div>
</div>

